#!/bin/sh

# Run lint-staged for code quality checks
npx lint-staged

# Get a list of staged JavaScript/TypeScript files
FILES=$(git diff --cached --name-only --diff-filter=ACMR | grep -E '\.tsx?$|\.jsx?$')

# If there are staged JS/TS files, run tests on them
if [ -n "$FILES" ]; then
  echo "Running tests on staged files..."
  echo "$FILES" | xargs npm test -- --findRelatedTests
fi
